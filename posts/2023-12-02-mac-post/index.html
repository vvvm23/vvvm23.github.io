<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Making Mac Bearable | Alex McKinney</title>
<meta name=keywords content><meta name=description content="Introduction Ilkley Moor
A few weeks ago I was made redundant along with a decent chunk of the company, after just under two months being employed there. Thanks to some odd technicalities, I was able to buy back my work laptop for a very low price. This was an M2 Air which ordinarily I would never use unless I had to, mostly due to the locked down nature of Mac that makes it difficult to customise exactly to my tastes, and also a dislike of the software it ships with."><meta name=author content><link rel=canonical href=https://afmck.in/posts/2023-12-02-mac-post/><link crossorigin=anonymous href=/assets/css/stylesheet.min.0fbade1da18e97af7375719317bb9ec325a4f325a425cbb45b6b7c0f5ce82a5d.css integrity="sha256-D7reHaGOl69zdXGTF7uewyWk8yWkJcu0W2t8D1zoKl0=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.5b9ae0304f93db6cc493f51846f012428af399c614b4f2fbdb7fa59dd4d5ef5b.js integrity="sha256-W5rgME+T22zEk/UYRvASQorzmcYUtPL723+lndTV71s=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://afmck.in/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://afmck.in/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://afmck.in/favicon-32x32.png><link rel=apple-touch-icon href=https://afmck.in/apple-touch-icon.png><link rel=mask-icon href=https://afmck.in/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Making Mac Bearable"><meta property="og:description" content="Introduction Ilkley Moor
A few weeks ago I was made redundant along with a decent chunk of the company, after just under two months being employed there. Thanks to some odd technicalities, I was able to buy back my work laptop for a very low price. This was an M2 Air which ordinarily I would never use unless I had to, mostly due to the locked down nature of Mac that makes it difficult to customise exactly to my tastes, and also a dislike of the software it ships with."><meta property="og:type" content="article"><meta property="og:url" content="https://afmck.in/posts/2023-12-02-mac-post/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-02T12:16:28+00:00"><meta property="article:modified_time" content="2023-12-02T12:16:28+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Making Mac Bearable"><meta name=twitter:description content="Introduction Ilkley Moor
A few weeks ago I was made redundant along with a decent chunk of the company, after just under two months being employed there. Thanks to some odd technicalities, I was able to buy back my work laptop for a very low price. This was an M2 Air which ordinarily I would never use unless I had to, mostly due to the locked down nature of Mac that makes it difficult to customise exactly to my tastes, and also a dislike of the software it ships with."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://afmck.in/posts/"},{"@type":"ListItem","position":3,"name":"Making Mac Bearable","item":"https://afmck.in/posts/2023-12-02-mac-post/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Making Mac Bearable","name":"Making Mac Bearable","description":"Introduction Ilkley Moor\nA few weeks ago I was made redundant along with a decent chunk of the company, after just under two months being employed there. Thanks to some odd technicalities, I was able to buy back my work laptop for a very low price. This was an M2 Air which ordinarily I would never use unless I had to, mostly due to the locked down nature of Mac that makes it difficult to customise exactly to my tastes, and also a dislike of the software it ships with.","keywords":[],"articleBody":"Introduction Ilkley Moor\nA few weeks ago I was made redundant along with a decent chunk of the company, after just under two months being employed there. Thanks to some odd technicalities, I was able to buy back my work laptop for a very low price. This was an M2 Air which ordinarily I would never use unless I had to, mostly due to the locked down nature of Mac that makes it difficult to customise exactly to my tastes, and also a dislike of the software it ships with.\nHowever, the price made it too tempting to resist, along with really falling in love with the insane battery life and GPU power it could provide. So following a series of unfortunate events, it was an easy decision.\nBut if you have ever spoken to me before, you will know I am quite passionate about tailoring computers to my needs and preferences. This is why I daily drive Linux on my own machine as it gives me full control to streamline all my computer-related processes. If I can‚Äôt do this, it genuinely contributes to low, underlying stress that begins to aggravate and strain me after continued usage.\nWhy it annoys me boils down to two key points:\nI will likely spend the majority of my life using a computer, be for work or leisure. Therefore, tiny annoyances and inefficiencies accumulate over time and are worth addressing. I get easily distracted, so I need to nuke distractions from my computer if I wish to get deep work done. The first point is less about time saving and more about cognitive load - essentially how much thinking power does it take to get from A to B. For example, I want to open my code editor, a terminal, and a browser in a specific arrangement. On a fresh system, without knowing many keybinds, this devolves into many steps that require thought, such as finding where your programs are, launching them, rearranging windows to your liking, and such. This has introduced additional cognitive effort into what was initially a simple desire, which contributes (at least for me) to small levels of stress and distraction.\nPerhaps you can‚Äôt relate on this example, but here are a few others:\nSomeone has taken all your files, flattened the directories, and pasted them all onto your desktop. Find that assignment that is due tomorrow! Keeping track of document versions via file names rather than version control software. Keyboard layout has changed between your PCs. Waiting for an annoying window animation to complete. Repeatedly testing code that requires multiple steps to reset the state (like deleting directories, resetting environment, etc.) All your nice cozy keybinds got reset and prod is down ü•π This concept of reducing the amount of thinking effort to do things on a computer is why I really like vim keybindings. Once you get good at it, you simply have to think ‚ÄúI want to delete that line / sentence / paragraph‚Äù and it happens in one step (dd, d), d}) rather than thinking about intermediate steps like cursor navigation, and such. However, vim is not the point of this post.\nThe second point is more relatable. We already have an endless bombardment of distraction from our phones, scientifically designed to own your attention, (I don‚Äôt think I need to elaborate here) so I try hard to make my computers a safe haven. So when my Mac starts telling me about the weather, world news, stock market, the time in Cupertino, or some random notification, I want to gouge out my own eyes.\nme when\nNotifications from things I care about are worse as they are guaranteed to pull me out of whatever I am doing. These are easy to disable though, however simply having the capability to check things like Twitter, messenger, and Youtube is enough to sometimes pull me away from work - essentially checking to see what I get in much the same way you would pull from a slot machine.\nRant aside, I now possess a device that must use the famously locked down MacOS. Without the restriction of conforming to IT policy on what I can and can‚Äôt do, can I make Mac as comfy to use as my main Linux daily driver? Spoilers, not really, but still an enjoyable computing experience.\nTiling Window Management My biggest issue with Mac out of the box is its window management. By default, there are no hotkeys for tiling and moving windows about the screen or for sending windows to different spaces.\nSome of these can be enabled, some by checkbox and others by literally typing in long strings to setup keyboard binds (you have to type the full name of the command, like ‚ÄúMove Window to Left Side of Screen‚Äù when creating a keybind - talk about ergonomic). I find there are loads of technicalities to get something working without installing additional software, but it is pretty terrible for a modern OS to not have a lot of these by default.\nin this screenshot, words of deranged and lost.\nMacOS not having a lot of sensible defaults and apps is a common theme in this blog. For example, it doesn‚Äôt even have per-app volume control, something I find insane to not have in the year of our lord 2023.\nTo actually get a decent window management experience, you need to rely on third party tools. In the past, I have tried two free solutions Rectangle (more of a window snapping tool than full window management) and Amethyst. Both are reasonable options, but by far the most feature complete (also free) solution is Yabai.\nPayed options also exist, which I have not tried out of principle.\nYabai exposes a bunch of commands that allows for control of windows, spaces, and displays from the command line. It also functions as a tiling window management (as opposed to floating) by automatically modifying window layout using binary space partitioning. Finally, it exposes extra settings for things like disabling animations, window shadows, and mouse control.\nIf you aren‚Äôt familiar with tiling versus floating window managers, the main difference is that tiling window managers will place and resize windows for you, whereas in floating window managers this is up to you. How exactly the windows are arranged in tiling window managers, and the degree of control you have, depends on the implementation and selected layout. Typically though, tiling window managers will not overlap windows, but do have the option for some windows to remain floating (such as popup boxes).\nTiling window managers are not for everyone, but I consider them essential for me. This is due to my philosophy of reducing cognitive load when using computers, and spending time rearranging windows contributes to that. It is also particularly useful if you want to stop using a mouse as often. YMMV.\nThe biggest downside is that for some of its features, it requires the partial disabling of MacOS‚Äôs System Integrity Protection (SIP). On work devices this could be unacceptable, which is why I had not tried Yabai until now. SIP basically just restricts the root user and where it can perform actions, so if you are comfortable working as root on Linux, and understand the risks of a truly unrestricted root user, then feel free to disable too.\nExample showing tiling window management with a bunch of terminals.\nI won‚Äôt repeat how to install it as the document is pretty good, but I will list out my configuration with comments for reference.\n# this injects additional code into the dock process. # will require SIP to be disabled and for permission to execute `yabai --load-sa` using sudo without a password. yabai -m signal --add event=dock_did_restart action=\"sudo yabai --load-sa\" sudo yabai --load-sa yabai -m config \\ # enables tiling window management layout bsp \\ # enable mouse dragging of windows when fn is held down mouse_modifier fn \\ # only enable shadows for floating windows window_shadow float \\ # make sure the mouse doesn't intefere with focus at all mouse_follows_focus off \\ focus_follows_mouse off \\ # disable animations for window movement window_animation_duration 0.0 \\ window_animation_frame_rate 120 \\ # setting window opacity (I like a bit of transparency..) window_opacity_duration 0.0 \\ active_window_opacity 1.0 \\ normal_window_opacity 0.9 \\ # default ratio to split windows by split_ratio 0.5 \\ split_type auto \\ # if enabled, split ratio is automatically determined. auto_balance off \\ # set padding between windows, purely for aesthetics. top_padding 5 \\ bottom_padding 5 \\ left_padding 5 \\ right_padding 5 \\ window_gap 5 # yabai used to support coloured borders for highlighted windows. # However, this no longer works, so I use \"JankyBorders\" and # background it here. borders active_color=0xffffffff inactive_color=0x00000000 width=2.0 2\u003e/dev/null 1\u003e\u00262 \u0026 The last line enables borders so I can identify the currently focused window, using a program named JankyBorders\nuseful when working with many windows at once. Yabai used to have inbuilt support for borders, which you may see referenced online. However, it has since removed them so the relevant configuration options won‚Äôt be recognised.\nYabai supports hot-reloading of the config file, so changes to the config will be made in real-time. This is useful for tweaking settings until you get something that feels good for you.\nWith this config alone, there is no way to actually control windows beyond dragging them while holding the fn key. The magic begins to happen when we combine this with the hotkey daemon skhd.\nHotkeys skhd defines key bindings via a simple text file config. Like Yabai, it supports hot-reloading of the config, so we can quickly iterate on configuration changes.\nAgain, I won‚Äôt enumerate the installation instructions. Luckily they don‚Äôt require disabling SIP, so are accessible to a wider range of users. Below is the configuration I use:\n# switch space using Ctrl and Number keys ctrl - 1 : yabai -m space --focus 1 ctrl - 2 : yabai -m space --focus 2 ctrl - 3 : yabai -m space --focus 3 ctrl - 4 : yabai -m space --focus 4 ctrl - 5 : yabai -m space --focus 5 ctrl - 6 : yabai -m space --focus 6 ctrl - 7 : yabai -m space --focus 7 ctrl - 8 : yabai -m space --focus 8 ctrl - 9 : yabai -m space --focus 9 # send focused window to space using Ctrl, Shift and Number keys shift + ctrl - 1 : yabai -m window --space 1 shift + ctrl - 2 : yabai -m window --space 2 shift + ctrl - 3 : yabai -m window --space 3 shift + ctrl - 4 : yabai -m window --space 4 shift + ctrl - 5 : yabai -m window --space 5 shift + ctrl - 6 : yabai -m window --space 6 shift + ctrl - 7 : yabai -m window --space 7 shift + ctrl - 8 : yabai -m window --space 8 shift + ctrl - 9 : yabai -m window --space 9 # swap window position with Ctrl, Shift and J/K shift + ctrl - j : ~/.config/yabai/swap_clockwise.sh shift + ctrl - k : ~/.config/yabai/swap_anticlockwise.sh # cycle window focus with Ctrl and J/K ctrl - j : ~/.config/yabai/cycle_clockwise.sh ctrl - k : ~/.config/yabai/cycle_anticlockwise.sh # opening some common applications # keeping this sleek for now, but will add more as I find it necessary shift + ctrl - return : open -n -a \"iterm\" shift + ctrl - c : open -n -a \"Firefox\" # resizing windows with Ctrl, Option and HJKL ctrl + alt - h : yabai -m window --resize left:-30:0 ; yabai -m window --resize right:-30:0 ctrl + alt - j : yabai -m window --resize bottom:0:30 ; yabai -m window --resize top:0:30 ctrl + alt - k : yabai -m window --resize top:0:-30 ; yabai -m window --resize bottom:0:-30 ctrl + alt - l : yabai -m window --resize right:30:0 ; yabai -m window --resize left:30:0 # toggle floating and place in centre with Ctrl and Space ctrl - space : yabai -m window --toggle float; yabai -m window --grid 5:5:1:1:3:3 Here, we can see the real use case for Yabai: its ability to send commands to manipulate window position.\nOn the left side of the colon is the skhd keybind, and on the right side is the command to execute. Usually, the command is to use yabai to manipulate the windows, such as focusing a particular space, moving a window, or resizing window. But it can execute anything, for example I bind Ctrl + Shift + C to open Firefox.\nShowing example usage with keybinds, showing opening terminals and browsers, cycling window position, resizing, and changing focus.\nI kept program launching binds to a minimum for now, but will likely add more later. I tend to find that the inbuilt Mac spotlight feature (with modifications) is a pretty good program launcher.\nMost of these commands are self-explanatory. You can find a full list of available commands in the Yabai wiki. However, the commands to cycle and swap window position call a custom script, which requires unpacking.\nTo ‚Äúcycle clockwise‚Äù means to move focus clockwise on the screen. I much prefer this to having to remember keybinds for focus in actual directions, as I will usually have at most 3 windows on screen at a time. This means that ‚Äúthis way or that way‚Äù is sufficient. Here is the script:\n# get the id of the current focused window win=$(yabai -m query --windows --window | jq '.id') # get the id of the \"last\" window in the list last_win=$(yabai -m query --windows --window last | jq '.id') # focus the next window or cycle to the first, if the current window is the last. if [[ $win == $last_win ]]; then yabai -m window --focus first else yabai -m window --focus next fi To ‚Äúswap clockwise‚Äù is similar: swapping the focused window and the next window in a clockwise fashion:\nwin=$(yabai -m query --windows --window last | jq '.id') while : ; do yabai -m window $win --swap prev \u0026\u003e /dev/null if [[ $? -eq 1 ]]; then break fi done This works by iteratively swapping all windows on the screen.\nAll in all, this yabai configuration is pretty barebones, but it is working for me for now. If you want to see more complex setups, I would advise visiting the UnixPorn subreddit (üò≥) and searching for Yabai.\nOptimising Terminal Use I like the terminal, and I do most of my work within it. The default MacOS terminal experience is pretty good, which is one reason I think developers tend to prefer it over Windows. However, it can be improved with additional tweaks.\nMost of these are not MacOS specific and could be applied to terminals on any operating system. However, the ones I mention here are motivated by specific issues I had with the default MacOS experience.\nFirst up is the much-loved brew which I am forever surprised is not just packaged with MacOS nowadays. This is essentially a package manager that you can use to install pretty much every program you can think of from the terminal.\nThis is to solve the issue of either going to the app store to get applications (which requires billing information even for free apps) or sourcing applications from the internet and literally dragging the icon to the applications folder to install.\nAnother classic that most developers know is iTerm2, basically a must have for anyone using the terminal on MacOS. You can see the full list of features here with my favourite being Copy Mode and inline images.\nMacOS uses zsh as the shell in use by the user. Whenever I use zsh, I always install oh-my-zsh which is a community driven, batteries-included framework around zsh. With it, you get access to hundreds of themes and plugins to enhance the terminal experience.\nI keep my list of plugins minimal to limit the effect on startup time. These include git integration (displays branch and other git-related info), sudo (double tap escape to execute the last command but with sudo), and fzf (Ctrl+T to launch a fuzzy file finder).\nExample of git integration.\nfzf is particularly useful as I really dislike the default file explorer Finder in MacOS, finding it to be slow and bloated. I have even had it lock up my system before with very large directories. You also can‚Äôt remove it as Finder is also responsible for other GUI elements in MacOS, such as the desktop. fzf is a good substitute for quickly directory hopping.\nfzf and vim mode usage to open a file.\nIn a similar vein, an underutilised feature of zsh is the cdr command, which is basically a quick way to return to recently visited directories. This can be enabled with the following additions to your .zshrc file:\nautoload -Uz chpwd_recent_dirs cdr add-zsh-hook add-zsh-hook chpwd chpwd_recent_dirs zstyle ':completion:*:*:cdr:*:*' menu selection Once enabled, type cdr followed by pressing tab to display a list of recent directories. Tab through these and press enter to select and change to that directory.\ncdr usage to jump to a recent directory.\nFinally, I deleted a lot of the directories within the home directory that get auto-generated by MacOS. I find these to be useless and clutter up space. Sadly, some of these will keep regenerating even if you delete them (Desktop) or will be regenerated after opening programs you cannot delete (iTunes creates the Music folder).\nMiscellaneous Stuff This final section shares a few random changes you may find useful:\nI hate docks, but sadly it cannot be removed! Like Finder, the Dock is responsible for more than just the dock. The second best thing you can do is make it very tiny and changing it to a position you are unlikely to hit. For me, this was to the left. The best you can do is run the following script to set the dock delay, making it less likely for you to mouse over it for long enough to trigger it: defaults write com.apple.dock autohide-delay -float ; killall Dock I unchecked all options in Spotlight except for System Settings, Calculator, and Applications. This makes Spotlight function like a very good program launcher, without any other things polluting the search results. Deleted all the widgets and turned off all notifications. Annoyingly, there is no way to do this globally, so you need to go through all one by one and turn them off. Modern versions of MacOS don‚Äôt have a way to set the wallpaper for all spaces in one go. You need to do it one-by-one, or delete all spaces, change the wallpaper, and recreate the spaces. The following command will set the background on all spaces to any image you want: sqlite3 ~/Library/Application\\ Support/Dock/desktoppicture.db \"update data set value = '/path/to/any/picture.png'\"; killall Dock; Installed BackgroundMusic to provide per-app volume control. Then uninstalled it as it was buggy for me. YMMV. Disabled as much telemetry as I could, basically by following this guide Disabling trackpad gestures as I don‚Äôt need them now with Yabai and skhd. I just accidentally trigger them rather than using them intentionally. Conclusion Though the changes I made are minimal, the effect of my workflow has been pretty immense. There are still some rough spots - some I can change and others I can‚Äôt. But overall MacOS is much more useable for me, and is now actually comfortable to use when away from my main workstation.\nI find the default experience, in contrast, extremely painful to use. I genuinely cannot understand how so many people are able to tolerate this. I am writing this mainly for others who find using these devices difficult and stressful, particularly those coming from Linux backgrounds. However, if you are perfectly happy with MacOS, I hope you discovered some useful tips here you can apply to your workflow, and that we agree that optimising your processes around computers is very important.\nOf course, it isn‚Äôt like that a lot of Linux distros are perfect out of the box either. Some just land you into a bare virtual terminal which isn‚Äôt exactly the bastion of usability. However the crucial difference is in the ease of customisation and how you are encouraged to customise, rather than meeting roadblocks at each turn.\nIf you liked this post please consider following me on Twitter or use this site‚Äôs RSS feed for notifications on future ramblings. Alternatively you can navigate to the root of this website and repeatedly refresh until something happens. Thank you for reading this far and I hope you found it useful!\n","wordCount":"3429","inLanguage":"en","datePublished":"2023-12-02T12:16:28Z","dateModified":"2023-12-02T12:16:28Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://afmck.in/posts/2023-12-02-mac-post/"},"publisher":{"@type":"Organization","name":"Alex McKinney","logo":{"@type":"ImageObject","url":"https://afmck.in/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://afmck.in accesskey=h title="Alex McKinney (Alt + H)">Alex McKinney</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://afmck.in/about title=About><span>About</span></a></li><li><a href=https://afmck.in/posts title=Posts><span>Posts</span></a></li><li><a href=https://afmck.in/misc title=Misc><span>Misc</span></a></li><li><a href=https://afmck.in/cv.pdf title=CV><span>CV</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Making Mac Bearable</h1></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#introduction aria-label=Introduction>Introduction</a></li><li><a href=#tiling-window-management aria-label="Tiling Window Management">Tiling Window Management</a></li><li><a href=#hotkeys aria-label=Hotkeys>Hotkeys</a></li><li><a href=#optimising-terminal-use aria-label="Optimising Terminal Use">Optimising Terminal Use</a></li><li><a href=#miscellaneous-stuff aria-label="Miscellaneous Stuff">Miscellaneous Stuff</a></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li></ul></div></details></div><div class=post-content><h3 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h3><p><img loading=lazy src=DSC07372.jpg alt="Ilkley Moor"></p><blockquote><p>Ilkley Moor</p></blockquote><p>A few weeks ago I was made redundant along with a decent chunk of the company,
after just under two months being employed there. Thanks to some odd
technicalities, I was able to buy back my work laptop for a very low price. This
was an M2 Air which ordinarily I would never use unless I had to, mostly due to
the locked down nature of Mac that makes it difficult to customise exactly to my
tastes, and also a dislike of the software it ships with.</p><p>However, the price made it too tempting to resist, along with really falling in
love with the insane battery life and GPU power it could provide. So following a
series of unfortunate events, it was an easy decision.</p><p>But if you have ever spoken to me before, you will know I am quite passionate
about tailoring computers to my needs and preferences. This is why I daily drive
Linux on my own machine as it gives me full control to streamline all my
computer-related processes. If I can&rsquo;t do this, it genuinely contributes to low,
underlying stress that begins to aggravate and strain me after continued usage.</p><p>Why it annoys me boils down to two key points:</p><ul><li>I will likely spend the majority of my life using a computer, be for work or
leisure. Therefore, tiny annoyances and inefficiencies accumulate over time and
are worth addressing.</li><li>I get easily distracted, so I need to nuke distractions from my computer if I
wish to get deep work done.</li></ul><p>The first point is less about <em>time saving</em> and more about <em>cognitive load</em> -
essentially how much thinking power does it take to get from A to B. For
example, I want to open my code editor, a terminal, and a browser in a specific
arrangement. On a fresh system, without knowing many keybinds, this devolves
into many steps that require thought, such as finding where your programs are,
launching them, rearranging windows to your liking, and such. This has
introduced additional cognitive effort into what was initially a simple desire,
which contributes (at least for me) to small levels of stress and distraction.</p><p>Perhaps you can&rsquo;t relate on this example, but here are a few others:</p><ul><li>Someone has taken all your files, flattened the directories, and pasted them
all onto your desktop. Find that assignment that is due tomorrow!</li><li>Keeping track of document versions via file names rather than version control
software.</li><li>Keyboard layout has changed between your PCs.</li><li>Waiting for an annoying window animation to complete.</li><li>Repeatedly testing code that requires multiple steps to reset the state (like
deleting directories, resetting environment, etc.)</li><li>All your nice cozy keybinds got reset and prod is down ü•π</li></ul><blockquote><p>This concept of reducing the amount of thinking effort to do things on a
computer is why I really like vim keybindings. Once you get good at it, you
simply have to think &ldquo;I want to delete that line / sentence / paragraph&rdquo; and it
happens in one step (<code>dd</code>, <code>d)</code>, <code>d}</code>) rather than thinking about intermediate
steps like cursor navigation, and such. However, vim is not the point of this
post.</p></blockquote><p>The second point is more relatable. We already have an endless bombardment of
distraction from our phones, scientifically designed to own your attention, (I
don&rsquo;t think I need to elaborate here) so I try hard to make my computers a safe
haven. So when my Mac starts telling me about the weather, world news, stock
market, the time in Cupertino, or some random notification, I want to gouge out
my own eyes.</p><p><img loading=lazy src=20231202112125.png alt="Mickey Mouse gouging his eyes out"></p><blockquote><p>me when</p></blockquote><p>Notifications from things I care about are worse as they are guaranteed to pull
me out of whatever I am doing. These are easy to disable though, however simply
<em>having the capability</em> to check things like Twitter, messenger, and Youtube is
enough to sometimes pull me away from work - essentially checking to <em>see what I
get</em> in much the same way you would pull from a slot machine.</p><p>Rant aside, I now possess a device that must use the famously locked down MacOS.
Without the restriction of conforming to IT policy on what I can and can&rsquo;t do,
can I make Mac as comfy to use as my main Linux daily driver? Spoilers, not
really, but still an enjoyable computing experience.</p><h3 id=tiling-window-management>Tiling Window Management<a hidden class=anchor aria-hidden=true href=#tiling-window-management>#</a></h3><p>My biggest issue with Mac out of the box is its window management. By default,
there are no hotkeys for tiling and moving windows about the screen or for
sending windows to different spaces.</p><p>Some of these can be enabled, some by checkbox and others by literally <em>typing
in long strings to setup keyboard binds</em> (you have to type the full name of the
command, like &ldquo;Move Window to Left Side of Screen&rdquo; when creating a keybind -
talk about ergonomic). I find there are loads of technicalities to get something
working without installing additional software, but it is pretty terrible for a
modern OS to not have a lot of these by default.</p><p><img loading=lazy src=20231202113227.png alt="Picture showing stupid UX"></p><blockquote><p>in this screenshot, words of deranged and lost.</p></blockquote><blockquote><p>MacOS not having a lot of sensible defaults and apps is a common theme in this
blog. For example, it doesn&rsquo;t even have per-app volume control, something I find
insane to not have in the year of our lord 2023.</p></blockquote><p>To actually get a decent window management experience, you need to rely on third
party tools. In the past, I have tried two free solutions
<a href=https://rectangleapp.com/>Rectangle</a> (more of a window snapping tool than full
window management) and <a href=https://github.com/ianyh/Amethyst>Amethyst</a>. Both are
reasonable options, but by far the most feature complete (also free) solution is
<a href=https://github.com/koekeishiya/yabai>Yabai</a>.</p><blockquote><p>Payed options also exist, which I have not tried out of principle.</p></blockquote><p>Yabai exposes a bunch of commands that allows for control of windows, spaces,
and displays from the command line. It also functions as a tiling window
management (as opposed to floating) by automatically modifying window layout
using binary space partitioning. Finally, it exposes extra settings for things
like disabling animations, window shadows, and mouse control.</p><blockquote><p>If you aren&rsquo;t familiar with tiling versus floating window managers, the main
difference is that tiling window managers will place and resize windows for you,
whereas in floating window managers this is up to you. How exactly the windows
are arranged in tiling window managers, and the degree of control you have,
depends on the implementation and selected layout. Typically though, tiling
window managers will not overlap windows, but do have the option for some
windows to remain floating (such as popup boxes).</p></blockquote><blockquote><p>Tiling window managers are not for everyone, but I consider them essential for
me. This is due to my philosophy of reducing cognitive load when using
computers, and spending time rearranging windows contributes to that. It is also
particularly useful if you want to stop using a mouse as often. YMMV.</p></blockquote><p>The biggest downside is that for some of its features, it requires the partial
disabling of MacOS&rsquo;s System Integrity Protection (SIP). On work devices this
could be unacceptable, which is why I had not tried Yabai until now. SIP
basically just restricts the root user and where it can perform actions, so if
you are comfortable working as root on Linux, and understand the risks of a
truly unrestricted root user, then feel free to disable too.</p><p><img loading=lazy src=1.gif alt="GIF showing tiling window management on a bunch of terminals."></p><blockquote><p>Example showing tiling window management with a bunch of terminals.</p></blockquote><p>I won&rsquo;t repeat how to install it as <a href=https://github.com/koekeishiya/yabai/wiki#quickstart-guide>the
document</a> is pretty
good, but I will list out my configuration with comments for reference.</p><pre tabindex=0><code># this injects additional code into the dock process.
# will require SIP to be disabled and for permission to execute `yabai --load-sa` using sudo without a password.
yabai -m signal --add event=dock_did_restart action=&#34;sudo yabai --load-sa&#34;
sudo yabai --load-sa

yabai -m config \
	# enables tiling window management
	layout bsp \

	# enable mouse dragging of windows when fn is held down
	mouse_modifier fn \

	# only enable shadows for floating windows
	window_shadow float \

	# make sure the mouse doesn&#39;t intefere with focus at all
	mouse_follows_focus off \
	focus_follows_mouse off \

	# disable animations for window movement
	window_animation_duration 0.0 \
	window_animation_frame_rate 120 \

	# setting window opacity (I like a bit of transparency..)
	window_opacity_duration 0.0 \
	active_window_opacity 1.0 \
	normal_window_opacity 0.9 \

	# default ratio to split windows by
	split_ratio 0.5 \
	split_type auto \
	
	# if enabled, split ratio is automatically determined.
	auto_balance off \

	# set padding between windows, purely for aesthetics.
	top_padding 5 \
	bottom_padding 5 \
	left_padding 5 \
	right_padding 5 \
	window_gap 5

# yabai used to support coloured borders for highlighted windows.
# However, this no longer works, so I use &#34;JankyBorders&#34; and 
# background it here.
borders active_color=0xffffffff inactive_color=0x00000000 width=2.0 2&gt;/dev/null 1&gt;&amp;2 &amp;
</code></pre><p>The last line enables borders so I can identify the currently focused window,
using a program named <a href=https://github.com/FelixKratz/JankyBorders>JankyBorders</a></p><ul><li>useful when working with many windows at once.</li></ul><blockquote><p>Yabai used to have inbuilt support for borders, which you may see referenced
online. However, it has since removed them so the relevant configuration options
won&rsquo;t be recognised.</p></blockquote><p>Yabai supports hot-reloading of the config file, so changes to the config will
be made in real-time. This is useful for tweaking settings until you get
something that feels good for you.</p><p>With this config alone, there is no way to actually control windows beyond
dragging them while holding the <code>fn</code> key. The magic begins to happen when we
combine this with the hotkey daemon skhd.</p><h3 id=hotkeys>Hotkeys<a hidden class=anchor aria-hidden=true href=#hotkeys>#</a></h3><p><a href=https://github.com/koekeishiya/skhd>skhd</a> defines key bindings via a simple
text file config. Like Yabai, it supports hot-reloading of the config, so we can
quickly iterate on configuration changes.</p><p>Again, I won&rsquo;t enumerate the installation instructions. Luckily they don&rsquo;t
require disabling SIP, so are accessible to a wider range of users. Below is the
configuration I use:</p><pre tabindex=0><code># switch space using Ctrl and Number keys
ctrl - 1 : yabai -m space --focus 1
ctrl - 2 : yabai -m space --focus 2
ctrl - 3 : yabai -m space --focus 3
ctrl - 4 : yabai -m space --focus 4
ctrl - 5 : yabai -m space --focus 5
ctrl - 6 : yabai -m space --focus 6
ctrl - 7 : yabai -m space --focus 7
ctrl - 8 : yabai -m space --focus 8
ctrl - 9 : yabai -m space --focus 9

# send focused window to space using Ctrl, Shift and Number keys
shift + ctrl - 1 : yabai -m window --space 1
shift + ctrl - 2 : yabai -m window --space 2
shift + ctrl - 3 : yabai -m window --space 3
shift + ctrl - 4 : yabai -m window --space 4
shift + ctrl - 5 : yabai -m window --space 5
shift + ctrl - 6 : yabai -m window --space 6
shift + ctrl - 7 : yabai -m window --space 7
shift + ctrl - 8 : yabai -m window --space 8
shift + ctrl - 9 : yabai -m window --space 9

# swap window position with Ctrl, Shift and J/K
shift + ctrl - j : ~/.config/yabai/swap_clockwise.sh
shift + ctrl - k : ~/.config/yabai/swap_anticlockwise.sh

# cycle window focus with Ctrl and J/K
ctrl - j : ~/.config/yabai/cycle_clockwise.sh
ctrl - k : ~/.config/yabai/cycle_anticlockwise.sh

# opening some common applications
# keeping this sleek for now, but will add more as I find it necessary
shift + ctrl - return : open -n -a &#34;iterm&#34;
shift + ctrl - c : open -n -a &#34;Firefox&#34;

# resizing windows with Ctrl, Option and HJKL
ctrl + alt - h : yabai -m window --resize left:-30:0 ; yabai -m window --resize right:-30:0
ctrl + alt - j : yabai -m window --resize bottom:0:30 ; yabai -m window --resize top:0:30
ctrl + alt - k : yabai -m window --resize top:0:-30 ; yabai -m window --resize bottom:0:-30
ctrl + alt - l : yabai -m window --resize right:30:0 ; yabai -m window --resize left:30:0

# toggle floating and place in centre with Ctrl and Space
ctrl - space : yabai -m window --toggle float; yabai -m window --grid 5:5:1:1:3:3
</code></pre><p>Here, we can see the real use case for Yabai: its ability to send commands to
manipulate window position.</p><p>On the left side of the colon is the skhd keybind, and on the right side is the
command to execute. Usually, the command is to use yabai to manipulate the
windows, such as focusing a particular space, moving a window, or resizing
window. But it can execute anything, for example I bind <code>Ctrl + Shift + C</code> to
open Firefox.</p><p><img loading=lazy src=2.gif alt="GIF showing keybinds to open terminal and firefox, cycle windows, and change focus."></p><blockquote><p>Showing example usage with keybinds, showing opening terminals and browsers, cycling window position, resizing, and changing focus.</p></blockquote><p>I kept program launching binds to a minimum for now, but will likely add more
later. I tend to find that the inbuilt Mac spotlight feature (with
modifications) is a pretty good program launcher.</p><p>Most of these commands are self-explanatory. You can find a full list of
available commands <a href=https://github.com/koekeishiya/yabai/wiki/Commands#message-passing-interface>in the Yabai
wiki</a>.
However, the commands to cycle and swap window position call a custom script,
which requires unpacking.</p><p>To &ldquo;cycle clockwise&rdquo; means to move focus clockwise on the screen. I much prefer
this to having to remember keybinds for focus in actual directions, as I will
usually have at most 3 windows on screen at a time. This means that &ldquo;this way or
that way&rdquo; is sufficient. Here is the script:</p><pre tabindex=0><code># get the id of the current focused window
win=$(yabai -m query --windows --window | jq &#39;.id&#39;)

# get the id of the &#34;last&#34; window in the list
last_win=$(yabai -m query --windows --window last | jq &#39;.id&#39;)

# focus the next window or cycle to the first, if the current window is the last.
if [[ $win == $last_win ]]; then
	yabai -m window --focus first
else
	yabai -m window --focus next
fi
</code></pre><p>To &ldquo;swap clockwise&rdquo; is similar: swapping the focused window and the next window in a clockwise fashion:</p><pre tabindex=0><code>win=$(yabai -m query --windows --window last | jq &#39;.id&#39;)

while : ; do
    yabai -m window $win --swap prev &amp;&gt; /dev/null
    if [[ $? -eq 1 ]]; then
        break
    fi
done
</code></pre><p>This works by iteratively swapping all windows on the screen.</p><p>All in all, this yabai configuration is pretty barebones, but it is working for
me for now. If you want to see more complex setups, I would advise visiting <a href=https://old.reddit.com/r/unixporn>the
UnixPorn subreddit</a> (üò≥) and searching for
Yabai.</p><h3 id=optimising-terminal-use>Optimising Terminal Use<a hidden class=anchor aria-hidden=true href=#optimising-terminal-use>#</a></h3><p>I like the terminal, and I do most of my work within it. The default MacOS
terminal experience is pretty good, which is one reason I think developers tend
to prefer it over Windows. However, it can be improved with additional tweaks.</p><p>Most of these are not MacOS specific and could be applied to terminals on any
operating system. However, the ones I mention here are motivated by specific
issues I had with the default MacOS experience.</p><p>First up is the much-loved <a href=https://brew.sh/>brew</a> which I am forever surprised
is not just packaged with MacOS nowadays. This is essentially a package manager
that you can use to install pretty much every program you can think of from the
terminal.</p><p>This is to solve the issue of either going to the app store to get applications
(which requires billing information even for free apps) or sourcing applications
from the internet <em>and literally dragging the icon to the applications folder to
install.</em></p><p>Another classic that most developers know is <a href=https://iterm2.com/>iTerm2</a>,
basically a must have for anyone using the terminal on MacOS. You can see the
full list of features <a href=https://iterm2.com/features.html>here</a> with my favourite
being Copy Mode and inline images.</p><p>MacOS uses zsh as the shell in use by the user. Whenever I use zsh, I always
install <a href=https://ohmyz.sh/>oh-my-zsh</a> which is a community driven,
batteries-included framework around zsh. With it, you get access to hundreds of
themes and plugins to enhance the terminal experience.</p><p>I keep my list of plugins minimal to limit the effect on startup time. These
include git integration (displays branch and other git-related info), sudo
(double tap escape to execute the last command but with sudo), and fzf (Ctrl+T
to launch a fuzzy file finder).</p><p><img loading=lazy src=git.png alt="Screenshot showing git integration with zsh"></p><blockquote><p>Example of git integration.</p></blockquote><p>fzf is particularly useful as I really dislike the default file explorer Finder
in MacOS, finding it to be slow and bloated. I have even had it lock up my
system before with very large directories. You also can&rsquo;t remove it as Finder is
also responsible for other GUI elements in MacOS, such as the desktop. fzf is a
good substitute for quickly directory hopping.</p><p><img loading=lazy src=fzf.gif alt="GIF showing fzf usage"></p><blockquote><p>fzf and vim mode usage to open a file.</p></blockquote><p>In a similar vein, an underutilised feature of zsh is the <code>cdr</code> command, which
is basically a quick way to return to recently visited directories. This can be
enabled with the following additions to your <code>.zshrc</code> file:</p><pre tabindex=0><code>autoload -Uz chpwd_recent_dirs cdr add-zsh-hook
add-zsh-hook chpwd chpwd_recent_dirs
zstyle &#39;:completion:*:*:cdr:*:*&#39; menu selection
</code></pre><p>Once enabled, type <code>cdr </code>followed by pressing tab to display a list of recent
directories. Tab through these and press enter to select and change to that
directory.</p><p><img loading=lazy src=cdr.gif alt="GIF showing cdr usage"></p><blockquote><p>cdr usage to jump to a recent directory.</p></blockquote><p>Finally, I deleted a lot of the directories within the home directory that get
auto-generated by MacOS. I find these to be useless and clutter up space. Sadly,
some of these will keep regenerating even if you delete them (Desktop) or will
be regenerated after opening programs you cannot delete (iTunes creates the
Music folder).</p><h3 id=miscellaneous-stuff>Miscellaneous Stuff<a hidden class=anchor aria-hidden=true href=#miscellaneous-stuff>#</a></h3><p>This final section shares a few random changes you may find useful:</p><ul><li>I hate docks, but sadly it cannot be removed! Like Finder, the Dock is
responsible for more than just the dock. The second best thing you can do is
make it very tiny and changing it to a position you are unlikely to hit. For me,
this was to the left. The best you can do is run the following script to set the
dock delay, making it less likely for you to mouse over it for long enough to
trigger it:</li></ul><pre tabindex=0><code>defaults write com.apple.dock autohide-delay -float &lt;time in seconds&gt;; killall Dock
</code></pre><ul><li>I unchecked all options in Spotlight except for System Settings, Calculator,
and Applications. This makes Spotlight function like a very good program
launcher, without any other things polluting the search results.</li><li>Deleted all the widgets and turned off all notifications. Annoyingly, there is
no way to do this globally, so you need to go through all one by one and turn
them off.</li><li>Modern versions of MacOS don&rsquo;t have a way to set the wallpaper for all spaces
in one go. You need to do it one-by-one, or delete all spaces, change the
wallpaper, and recreate the spaces. The following command will set the
background on all spaces to any image you want:</li></ul><pre tabindex=0><code> sqlite3 ~/Library/Application\ Support/Dock/desktoppicture.db &#34;update data set value = &#39;/path/to/any/picture.png&#39;&#34;;
 killall Dock;
</code></pre><ul><li>Installed <a href=https://github.com/kyleneideck/BackgroundMusic>BackgroundMusic</a> to
provide per-app volume control. Then uninstalled it as it was buggy for me.
YMMV.</li><li>Disabled as much telemetry as I could, basically by following <a href=https://github.com/herrbischoff/telemetry>this
guide</a></li><li>Disabling trackpad gestures as I don&rsquo;t need them now with Yabai and skhd. I
just accidentally trigger them rather than using them intentionally.</li></ul><h3 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h3><p>Though the changes I made are minimal, the effect of my workflow has been pretty
immense. There are still some rough spots - some I can change and others I
can&rsquo;t. But overall MacOS is much more useable for me, and is now actually
comfortable to use when away from my main workstation.</p><p>I find the default experience, in contrast, extremely painful to use. I
genuinely cannot understand how so many people are able to tolerate this. I am
writing this mainly for others who find using these devices difficult and
stressful, particularly those coming from Linux backgrounds. However, if you are
perfectly happy with MacOS, I hope you discovered some useful tips here you can
apply to your workflow, and that we agree that optimising your processes around
computers is very important.</p><p>Of course, it isn&rsquo;t like that a lot of Linux distros are perfect out of the box
either. Some just land you into a bare virtual terminal which isn&rsquo;t exactly the
bastion of usability. However the crucial difference is in the ease of
customisation and how you are <em>encouraged</em> to customise, rather than meeting
roadblocks at each turn.</p><p><em>If you liked this post please consider following me on
<a href=https://twitter.com/alexfmckinney>Twitter</a> or use this site‚Äôs RSS feed for
notifications on future ramblings. Alternatively you can navigate to the root of
this website and repeatedly refresh until something happens. Thank you for
reading this far and I hope you found it useful!</em></p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://afmck.in>Alex McKinney</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
<a href=/cheems rel="noopener noreferrer">üêïÔ∏è</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>